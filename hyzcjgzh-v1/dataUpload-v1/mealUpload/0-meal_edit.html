<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <!--忽略页面中的邮箱格式为邮箱-->
    <meta name="format-detection" content="email=no">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">
    <meta name="format-detection" content="telephone=no,address=no,email=no">
    <title>餐谱可编辑</title>
    <link rel="stylesheet" href="../css/app.css">
    <link rel="stylesheet" href="../../hyzRes/css/myswiper.min.css">
    <link rel="stylesheet" href="../css/meal.css">

</head>
<body style="font-family: myFont;">
<div class="big_img">
    <div class="swiper-container2">
        <div class="swiper-wrapper">
        </div>
    </div>
    <div class="swiper-pagination2"></div>
</div>
<div id="top">
    <div class="swiper-container" id="nav">
        <div class="swiper-wrapper">
            <div class="swiper-slide">
                <span style="color:rgba(99, 164, 49, 1);">星期一</span></div>
            <div class="swiper-slide">
                <span>星期二</span></div>
            <div class="swiper-slide">
                <span>星期三</span></div>
            <div class="swiper-slide">
                <span>星期四</span></div>
            <div class="swiper-slide">
                <span>星期五</span></div>
        </div>
    </div>
</div>
<div class="swiper-container" id="page">
    <div class="swiper-wrapper">
        <div class="swiper-slide slidepage">
            <div class="swiper-container scroll" id="scroll-v1">
                <div class="swiper-wrapper">
                    <div class="swiper-slide slidescroll">
                        <div class="week_food">
                            <div class="week_title clearfix">
                                <p class="food_title fl">餐谱介绍</p>
                                <img src="../images/edit_icon.png" alt="" class="edit_icon fr">
                            </div>
                            <div class="food_list">
                                <div class="num_list">
                                    <div class="arr_san"></div>
                                    <ol class="num_ol">
                                        <li class="num_li">早餐：豆浆+油条+牛奶+鸡蛋</li>
                                        <li class="num_li">间点：豆浆+油条+牛奶+鸡蛋</li>
                                        <li class="num_li">午餐：豆浆+油条+牛奶+鸡蛋</li>
                                        <li class="num_li">间点：豆浆+油条+牛奶+鸡蛋</li>
                                        <li class="num_li">晚餐：豆浆+油条+牛奶+鸡蛋</li>
                                    </ol>
                                </div>

                                <ol class="img_ol clearfix">
                                    <li class="img_li z_addImg">
                                        <img src="../../hyzRes/images/pay_pages/page5.png" alt="">
                                    </li>
                                    <li class="img_li z_addImg">
                                        <img src="../../hyzRes/images/pay_pages/page5.png" alt="">
                                    </li>
                                    <li class="img_li z_addImg">
                                        <img src="../../hyzRes/images/pay_pages/page5.png" alt="">
                                    </li>
                                    <li class="img_li z_addImg">
                                        <img src="../../hyzRes/images/pay_pages/page5.png" alt="">
                                    </li>
                                    <li class="img_li z_addImg">
                                        <img src="../../hyzRes/images/pay_pages/page5.png" alt="">
                                    </li>
                                    <li class="img_li z_addImg">
                                        <img src="../../hyzRes/images/pay_pages/page5.png" alt="">
                                    </li>

                                </ol>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="swiper-slide slidepage">
            <div class="swiper-container scroll" id="scroll-v2">
                <div class="swiper-wrapper">
                    <div class="swiper-slide slidescroll">
                        <div class="week_food">
                            <div class="week_title clearfix">
                                <p class="food_title fl">餐谱介绍</p>
                                <img src="../images/edit_icon.png" alt="" class="edit_icon fr">
                            </div>
                            <div class="food_list">
                                <div class="num_list">
                                    <div class="arr_san"></div>
                                    <ol class="num_ol">
                                        <li class="num_li">早餐：豆浆+油条+牛奶+鸡蛋</li>
                                        <li class="num_li">间点：豆浆+油条+牛奶+鸡蛋</li>
                                        <li class="num_li">午餐：豆浆+油条+牛奶+鸡蛋</li>
                                        <li class="num_li">间点：豆浆+油条+牛奶+鸡蛋</li>
                                        <li class="num_li">晚餐：豆浆+油条+牛奶+鸡蛋</li>
                                    </ol>
                                </div>

                                <ol class="img_ol clearfix">
                                    <li class="img_li z_addImg">
                                        <img src="../../hyzRes/images/pay_pages/page5.png" alt="">
                                    </li>
                                    <li class="img_li z_addImg">
                                        <img src="../../hyzRes/images/pay_pages/page5.png" alt="">
                                    </li>
                                    <li class="img_li z_addImg">
                                        <img src="../../hyzRes/images/pay_pages/page5.png" alt="">
                                    </li>
                                    <li class="img_li z_addImg">
                                        <img src="../../hyzRes/images/pay_pages/page5.png" alt="">
                                    </li>
                                    <li class="img_li z_addImg">
                                        <img src="../../hyzRes/images/pay_pages/page5.png" alt="">
                                    </li>
                                    <li class="img_li z_addImg">
                                        <img src="../../hyzRes/images/pay_pages/page5.png" alt="">
                                    </li>
                                </ol>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="swiper-slide slidepage">
            <div class="swiper-container scroll" id="scroll-v3">
                <div class="swiper-wrapper">
                    <div class="swiper-slide slidescroll">
                        <div class="week_food">
                            <div class="week_title clearfix">
                                <p class="food_title fl">餐谱介绍</p>
                                <img src="../images/edit_icon.png" alt="" class="edit_icon fr">
                            </div>
                            <div class="food_list">
                                <div class="num_list">
                                    <div class="arr_san"></div>
                                    <ol class="num_ol">
                                        <li class="num_li">早餐：豆浆+油条+牛奶+鸡蛋</li>
                                        <li class="num_li">间点：豆浆+油条+牛奶+鸡蛋</li>
                                        <li class="num_li">午餐：豆浆+油条+牛奶+鸡蛋</li>
                                        <li class="num_li">间点：豆浆+油条+牛奶+鸡蛋</li>
                                        <li class="num_li">晚餐：豆浆+油条+牛奶+鸡蛋</li>
                                    </ol>
                                </div>

                                <ol class="img_ol clearfix">
                                    <li class="img_li z_addImg">
                                        <img src="../../hyzRes/images/pay_pages/page5.png" alt="">
                                    </li>
                                    <li class="img_li z_addImg">
                                        <img src="../../hyzRes/images/pay_pages/page5.png" alt="">
                                    </li>
                                    <li class="img_li z_addImg">
                                        <img src="../../hyzRes/images/pay_pages/page5.png" alt="">
                                    </li>
                                    <li class="img_li z_addImg">
                                        <img src="../../hyzRes/images/pay_pages/page5.png" alt="">
                                    </li>
                                    <li class="img_li z_addImg">
                                        <img src="../../hyzRes/images/pay_pages/page5.png" alt="">
                                    </li>
                                    <li class="img_li z_addImg">
                                        <img src="../../hyzRes/images/pay_pages/page5.png" alt="">
                                    </li>
                                </ol>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="swiper-slide slidepage">
            <div class="swiper-container scroll" id="scroll-v4">
                <div class="swiper-wrapper">
                    <div class="swiper-slide slidescroll">
                        <div class="week_food">
                            <div class="week_title clearfix">
                                <p class="food_title fl">餐谱介绍</p>
                                <img src="../images/edit_icon.png" alt="" class="edit_icon fr">
                            </div>
                            <div class="food_list">
                                <div class="num_list">
                                    <div class="arr_san"></div>
                                    <ol class="num_ol">
                                        <li class="num_li">早餐：豆浆+油条+牛奶+鸡蛋</li>
                                        <li class="num_li">间点：豆浆+油条+牛奶+鸡蛋</li>
                                        <li class="num_li">午餐：豆浆+油条+牛奶+鸡蛋</li>
                                        <li class="num_li">间点：豆浆+油条+牛奶+鸡蛋</li>
                                        <li class="num_li">晚餐：豆浆+油条+牛奶+鸡蛋</li>
                                    </ol>
                                </div>

                                <ol class="img_ol clearfix">
                                    <li class="img_li z_addImg">
                                        <img src="../../hyzRes/images/pay_pages/page5.png" alt="">
                                    </li>
                                    <li class="img_li z_addImg">
                                        <img src="../../hyzRes/images/pay_pages/page5.png" alt="">
                                    </li>
                                    <li class="img_li z_addImg">
                                        <img src="../../hyzRes/images/pay_pages/page5.png" alt="">
                                    </li>
                                    <li class="img_li z_addImg">
                                        <img src="../../hyzRes/images/pay_pages/page5.png" alt="">
                                    </li>
                                    <li class="img_li z_addImg">
                                        <img src="../../hyzRes/images/pay_pages/page5.png" alt="">
                                    </li>
                                    <li class="img_li z_addImg">
                                        <img src="../../hyzRes/images/pay_pages/page5.png" alt="">
                                    </li>
                                </ol>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="swiper-slide slidepage">
            <div class="swiper-container scroll" id="scroll-v5">
                <div class="swiper-wrapper">
                    <div class="swiper-slide slidescroll">
                        <div class="week_food">
                            <div class="week_title clearfix">
                                <p class="food_title fl">餐谱介绍</p>
                                <img src="../images/edit_icon.png" alt="" class="edit_icon fr">
                            </div>
                            <div class="food_list">
                                <div class="num_list">
                                    <div class="arr_san"></div>
                                    <ol class="num_ol">
                                        <li class="num_li">早餐：豆浆+油条+牛奶+鸡蛋</li>
                                        <li class="num_li">间点：豆浆+油条+牛奶+鸡蛋</li>
                                        <li class="num_li">午餐：豆浆+油条+牛奶+鸡蛋</li>
                                        <li class="num_li">间点：豆浆+油条+牛奶+鸡蛋</li>
                                        <li class="num_li">晚餐：豆浆+油条+牛奶+鸡蛋</li>
                                    </ol>
                                </div>

                                <ol class="img_ol clearfix">
                                    <li class="img_li z_addImg">
                                        <img src="../../hyzRes/images/pay_pages/page5.png" alt="">
                                    </li>
                                    <li class="img_li z_addImg">
                                        <img src="../../hyzRes/images/pay_pages/page5.png" alt="">
                                    </li>
                                    <li class="img_li z_addImg">
                                        <img src="../../hyzRes/images/pay_pages/page5.png" alt="">
                                    </li>
                                    <li class="img_li z_addImg">
                                        <img src="../../hyzRes/images/pay_pages/page5.png" alt="">
                                    </li>
                                    <li class="img_li z_addImg">
                                        <img src="../../hyzRes/images/pay_pages/page5.png" alt="">
                                    </li>
                                    <li class="img_li z_addImg">
                                        <img src="../../hyzRes/images/pay_pages/page5.png" alt="">
                                    </li>
                                </ol>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="btnpreview">
        <div class="clearfix stap_div">
            <a href="javascript:void (0);" class="upper_btn">返 回</a>
            <a href="javascript:void (0);" class="next_btn">确认无误，提交</a>
        </div>
    </div>
</div>

</body>
<script src=../../hyzRes/js/jquery-1.11.1.min.js></script>
<script src="../js/mymeal.min.js"></script>
<script src=../../hyzRes/js/lightbox.js></script>
<script>
    //暂时设计每个slide大小需要一致
    barwidth = 36 //导航橙色条的长度px
    tSpeed = 300 //切换速度300ms
    var navSwiper = new Swiper('#nav', {
        slidesPerView: 5,
        freeMode: true,
        on: {
            init: function () {
                console.log("----init-----")
                navSlideWidth = this.slides.eq(0).css('width'); //导航字数需要统一,每个导航宽度一致
                bar = this.$el.find('.bar')
                bar.css('width', navSlideWidth)
                bar.transition(tSpeed)
                navSum = this.slides[this.slides.length - 1].offsetLeft //最后一个slide的位置

                clientWidth = parseInt(this.$wrapperEl.css('width')) //Nav的可视宽度
                navWidth = 0
                for (i = 0; i < this.slides.length; i++) {
                    navWidth += parseInt(this.slides.eq(i).css('width'))
                }

                topBar = this.$el.parents('body').find('#top') //页头
                $('#page').animate({scrollTop: 0},10);

            },

        },
    });

    var pageSwiper = new Swiper('#page', {
        watchSlidesProgress: true,
        resistanceRatio: 0,
        on: {
            touchMove: function () {
                progress = this.progress
                bar.transition(0)
                bar.transform('translateX(' + navSum * progress + 'px)')
                //粉色255,72,145灰色51,51,51
                for (i = 0; i < this.slides.length; i++) {
                    slideProgress = this.slides[i].progress
                    if (Math.abs(slideProgress) < 1) {
                        r = Math.floor((99 - 153) * (1 - Math.pow(Math.abs(slideProgress), 2)) + 153)
                        g = Math.floor((164 - 153) * (1 - Math.pow(Math.abs(slideProgress), 2)) + 153)
                        b = Math.floor((49 - 153) * (1 - Math.pow(Math.abs(slideProgress), 2)) + 153)
                        navSwiper.slides.eq(i).find('span').css('color', 'rgba(' + r + ',' + g + ',' + b + ',1)')
                    }
                }
            },
            transitionStart: function () {
                console.log("----transitionStart-----")
                activeIndex = this.activeIndex
                activeSlidePosition = navSwiper.slides[activeIndex].offsetLeft
                //释放时导航粉色条移动过渡
                bar.transition(tSpeed)
                bar.transform('translateX(' + activeSlidePosition + 'px)')
                //释放时文字变色过渡
                navSwiper.slides.eq(activeIndex).find('span').transition(tSpeed)
                navSwiper.slides.eq(activeIndex).find('span').css('color', 'rgba(99, 164, 49, 1)')
                if (activeIndex > 0) {
                    navSwiper.slides.eq(activeIndex - 1).find('span').transition(tSpeed)
                    navSwiper.slides.eq(activeIndex - 1).find('span').css('color', 'rgba(153, 153, 153, 1)')
                }
                if (activeIndex < this.slides.length) {
                    navSwiper.slides.eq(activeIndex + 1).find('span').transition(tSpeed)
                    navSwiper.slides.eq(activeIndex + 1).find('span').css('color', 'rgba(153, 153, 153, 1)')
                }
                //导航居中
                navActiveSlideLeft = navSwiper.slides[activeIndex].offsetLeft //activeSlide距左边的距离

                navSwiper.setTransition(tSpeed)
                if (navActiveSlideLeft < (clientWidth - parseInt(navSlideWidth)) / 2) {
                    navSwiper.setTranslate(0)
                } else if (navActiveSlideLeft > navWidth - (parseInt(navSlideWidth) + clientWidth) / 2) {
                    navSwiper.setTranslate(clientWidth - navWidth)
                } else {
                    navSwiper.setTranslate((clientWidth - parseInt(navSlideWidth)) / 2 - navActiveSlideLeft)
                }
                $('#page').animate({scrollTop: 0},10);

            },
        }
    });

    navSwiper.$el.on('touchstart', function (e) {
        e.preventDefault() //去掉按压阴影
    })
    navSwiper.on('tap', function (e) {
        console.log("----tap-----")
        clickIndex = this.clickedIndex
        clickSlide = this.slides.eq(clickIndex)
        pageSwiper.slideTo(clickIndex, 0);
        this.slides.find('span').css('color', 'rgba(153, 153, 153, 1)');
        clickSlide.find('span').css('color', 'rgba(99, 164, 49, 1)');
    })

    //内容滚动
    var scrollSwiper = new Swiper('#scroll-v1', {
        //65是头部的高
        //36是top地址和搜索的高

        slidesOffsetBefore: 72,
        direction: 'vertical',
        freeMode: true,
        slidesPerView: 'auto',

        mousewheel: {
            releaseOnEdges: true,
        },
        on: {
            touchMove: function () {

                if (this.translate > 72 - 36 && this.translate < 72) {
                    topBar.transform('translateY(' + (this.translate - 72) + 'px)');
                }

            },
            touchStart: function () {
                startPosition = this.translate
            },
            touchEnd: function () {
                console.log("----touchEnd-----")
                topBar.transition(tSpeed)
                $('#page').animate({scrollTop: 0},10);
                if (this.translate > 36 && this.translate < 72 && this.translate < startPosition) {
                    topBar.transform('translateY(-36px)');
                    for (sc = 0; sc < scrollSwiper.length; sc++) {
                        if (scrollSwiper[sc].translate > 36) {
                            scrollSwiper[sc].setTransition(tSpeed);
                            scrollSwiper[sc].setTranslate(36)
                        }
                    }
                }
                if (this.translate > 36 && this.translate < 72 && this.translate > startPosition) {
                    topBar.transform('translateY(0px)');
                    for (sc = 0; sc < scrollSwiper.length; sc++) {
                        if (scrollSwiper[sc].translate < 72 && scrollSwiper[sc].translate > 0) {
                            scrollSwiper[sc].setTransition(tSpeed);
                            scrollSwiper[sc].setTranslate(72)
                        }
                    }
                }
            },

            transitionStart: function () {

                topBar.transition(tSpeed)
                if (this.translate < 72 - 36) {
                    topBar.transform('translateY(-36px)');
                    if (scrollSwiper) {
                        for (sc = 0; sc < scrollSwiper.length; sc++) {
                            if (scrollSwiper[sc].translate > 36) {
                                scrollSwiper[sc].setTransition(tSpeed);
                                scrollSwiper[sc].setTranslate(36)
                            }
                        }
                    }

                } else {
                    topBar.transform('translateY(0px)');

                    if (scrollSwiper) {
                        for (sc = 0; sc < scrollSwiper.length; sc++) {
                            if (scrollSwiper[sc].translate < 72 && scrollSwiper[sc].translate > 0) {
                                scrollSwiper[sc].setTransition(tSpeed);
                                scrollSwiper[sc].setTranslate(72)
                            }
                        }
                    }
                }
            },
        }

    })
    //内容滚动
    var scrollSwiper = new Swiper('#scroll-v2', {
        //65是头部的高
        //36是top地址和搜索的高

        slidesOffsetBefore: 72,
        direction: 'vertical',
        freeMode: true,
        slidesPerView: 'auto',

        mousewheel: {
            releaseOnEdges: true,
        },
        on: {
            touchMove: function () {

                if (this.translate > 72 - 36 && this.translate < 72) {
                    topBar.transform('translateY(' + (this.translate - 72) + 'px)');
                }

            },
            touchStart: function () {
                startPosition = this.translate
            },
            touchEnd: function () {
                console.log("----touchEnd-----")
                topBar.transition(tSpeed)
                $('#page').animate({scrollTop: 0},10);
                if (this.translate > 36 && this.translate < 72 && this.translate < startPosition) {
                    topBar.transform('translateY(-36px)');
                    for (sc = 0; sc < scrollSwiper.length; sc++) {
                        if (scrollSwiper[sc].translate > 36) {
                            scrollSwiper[sc].setTransition(tSpeed);
                            scrollSwiper[sc].setTranslate(36)
                        }
                    }
                }
                if (this.translate > 36 && this.translate < 72 && this.translate > startPosition) {
                    topBar.transform('translateY(0px)');
                    for (sc = 0; sc < scrollSwiper.length; sc++) {
                        if (scrollSwiper[sc].translate < 72 && scrollSwiper[sc].translate > 0) {
                            scrollSwiper[sc].setTransition(tSpeed);
                            scrollSwiper[sc].setTranslate(72)
                        }
                    }
                }
            },

            transitionStart: function () {

                topBar.transition(tSpeed)
                if (this.translate < 72 - 36) {
                    topBar.transform('translateY(-36px)');
                    if (scrollSwiper) {
                        for (sc = 0; sc < scrollSwiper.length; sc++) {
                            if (scrollSwiper[sc].translate > 36) {
                                scrollSwiper[sc].setTransition(tSpeed);
                                scrollSwiper[sc].setTranslate(36)
                            }
                        }
                    }

                } else {
                    topBar.transform('translateY(0px)');

                    if (scrollSwiper) {
                        for (sc = 0; sc < scrollSwiper.length; sc++) {
                            if (scrollSwiper[sc].translate < 72 && scrollSwiper[sc].translate > 0) {
                                scrollSwiper[sc].setTransition(tSpeed);
                                scrollSwiper[sc].setTranslate(72)
                            }
                        }
                    }
                }
            },
        }

    })
    //内容滚动
    var scrollSwiper = new Swiper('#scroll-v3', {
        //65是头部的高
        //36是top地址和搜索的高

        slidesOffsetBefore: 72,
        direction: 'vertical',
        freeMode: true,
        slidesPerView: 'auto',

        mousewheel: {
            releaseOnEdges: true,
        },
        on: {
            touchMove: function () {

                if (this.translate > 72 - 36 && this.translate < 72) {
                    topBar.transform('translateY(' + (this.translate - 72) + 'px)');
                }

            },
            touchStart: function () {
                startPosition = this.translate
            },
            touchEnd: function () {
                console.log("----touchEnd-----")
                topBar.transition(tSpeed)
                $('#page').animate({scrollTop: 0},10);
                if (this.translate > 36 && this.translate < 72 && this.translate < startPosition) {
                    topBar.transform('translateY(-36px)');
                    for (sc = 0; sc < scrollSwiper.length; sc++) {
                        if (scrollSwiper[sc].translate > 36) {
                            scrollSwiper[sc].setTransition(tSpeed);
                            scrollSwiper[sc].setTranslate(36)
                        }
                    }
                }
                if (this.translate > 36 && this.translate < 72 && this.translate > startPosition) {
                    topBar.transform('translateY(0px)');
                    for (sc = 0; sc < scrollSwiper.length; sc++) {
                        if (scrollSwiper[sc].translate < 72 && scrollSwiper[sc].translate > 0) {
                            scrollSwiper[sc].setTransition(tSpeed);
                            scrollSwiper[sc].setTranslate(72)
                        }
                    }
                }
            },

            transitionStart: function () {

                topBar.transition(tSpeed)
                if (this.translate < 72 - 36) {
                    topBar.transform('translateY(-36px)');
                    if (scrollSwiper) {
                        for (sc = 0; sc < scrollSwiper.length; sc++) {
                            if (scrollSwiper[sc].translate > 36) {
                                scrollSwiper[sc].setTransition(tSpeed);
                                scrollSwiper[sc].setTranslate(36)
                            }
                        }
                    }

                } else {
                    topBar.transform('translateY(0px)');

                    if (scrollSwiper) {
                        for (sc = 0; sc < scrollSwiper.length; sc++) {
                            if (scrollSwiper[sc].translate < 72 && scrollSwiper[sc].translate > 0) {
                                scrollSwiper[sc].setTransition(tSpeed);
                                scrollSwiper[sc].setTranslate(72)
                            }
                        }
                    }
                }
            },
        }

    })
    //内容滚动
    var scrollSwiper = new Swiper('#scroll-v4', {
        //65是头部的高
        //36是top地址和搜索的高

        slidesOffsetBefore: 72,
        direction: 'vertical',
        freeMode: true,
        slidesPerView: 'auto',

        mousewheel: {
            releaseOnEdges: true,
        },
        on: {
            touchMove: function () {

                if (this.translate > 72 - 36 && this.translate < 72) {
                    topBar.transform('translateY(' + (this.translate - 72) + 'px)');
                }

            },
            touchStart: function () {
                startPosition = this.translate
            },
            touchEnd: function () {
                console.log("----touchEnd-----")
                topBar.transition(tSpeed)
                $('#page').animate({scrollTop: 0},10);
                if (this.translate > 36 && this.translate < 72 && this.translate < startPosition) {
                    topBar.transform('translateY(-36px)');
                    for (sc = 0; sc < scrollSwiper.length; sc++) {
                        if (scrollSwiper[sc].translate > 36) {
                            scrollSwiper[sc].setTransition(tSpeed);
                            scrollSwiper[sc].setTranslate(36)
                        }
                    }
                }
                if (this.translate > 36 && this.translate < 72 && this.translate > startPosition) {
                    topBar.transform('translateY(0px)');
                    for (sc = 0; sc < scrollSwiper.length; sc++) {
                        if (scrollSwiper[sc].translate < 72 && scrollSwiper[sc].translate > 0) {
                            scrollSwiper[sc].setTransition(tSpeed);
                            scrollSwiper[sc].setTranslate(72)
                        }
                    }
                }
            },

            transitionStart: function () {

                topBar.transition(tSpeed)
                if (this.translate < 72 - 36) {
                    topBar.transform('translateY(-36px)');
                    if (scrollSwiper) {
                        for (sc = 0; sc < scrollSwiper.length; sc++) {
                            if (scrollSwiper[sc].translate > 36) {
                                scrollSwiper[sc].setTransition(tSpeed);
                                scrollSwiper[sc].setTranslate(36)
                            }
                        }
                    }

                } else {
                    topBar.transform('translateY(0px)');

                    if (scrollSwiper) {
                        for (sc = 0; sc < scrollSwiper.length; sc++) {
                            if (scrollSwiper[sc].translate < 72 && scrollSwiper[sc].translate > 0) {
                                scrollSwiper[sc].setTransition(tSpeed);
                                scrollSwiper[sc].setTranslate(72)
                            }
                        }
                    }
                }
            },
        }

    })
    //内容滚动
    var scrollSwiper = new Swiper('#scroll-v5', {
        //65是头部的高
        //36是top地址和搜索的高

        slidesOffsetBefore: 72,
        direction: 'vertical',
        freeMode: true,
        slidesPerView: 'auto',

        mousewheel: {
            releaseOnEdges: true,
        },
        on: {
            touchMove: function () {

                if (this.translate > 72 - 36 && this.translate < 72) {
                    topBar.transform('translateY(' + (this.translate - 72) + 'px)');
                }

            },
            touchStart: function () {
                startPosition = this.translate
            },
            touchEnd: function () {
                console.log("----touchEnd-----")
                topBar.transition(tSpeed)
                $('#page').animate({scrollTop: 0},10);
                if (this.translate > 36 && this.translate < 72 && this.translate < startPosition) {
                    topBar.transform('translateY(-36px)');
                    for (sc = 0; sc < scrollSwiper.length; sc++) {
                        if (scrollSwiper[sc].translate > 36) {
                            scrollSwiper[sc].setTransition(tSpeed);
                            scrollSwiper[sc].setTranslate(36)
                        }
                    }
                }
                if (this.translate > 36 && this.translate < 72 && this.translate > startPosition) {
                    topBar.transform('translateY(0px)');
                    for (sc = 0; sc < scrollSwiper.length; sc++) {
                        if (scrollSwiper[sc].translate < 72 && scrollSwiper[sc].translate > 0) {
                            scrollSwiper[sc].setTransition(tSpeed);
                            scrollSwiper[sc].setTranslate(72)
                        }
                    }
                }
            },

            transitionStart: function () {

                topBar.transition(tSpeed)
                if (this.translate < 72 - 36) {
                    topBar.transform('translateY(-36px)');
                    if (scrollSwiper) {
                        for (sc = 0; sc < scrollSwiper.length; sc++) {
                            if (scrollSwiper[sc].translate > 36) {
                                scrollSwiper[sc].setTransition(tSpeed);
                                scrollSwiper[sc].setTranslate(36)
                            }
                        }
                    }

                } else {
                    topBar.transform('translateY(0px)');

                    if (scrollSwiper) {
                        for (sc = 0; sc < scrollSwiper.length; sc++) {
                            if (scrollSwiper[sc].translate < 72 && scrollSwiper[sc].translate > 0) {
                                scrollSwiper[sc].setTransition(tSpeed);
                                scrollSwiper[sc].setTranslate(72)
                            }
                        }
                    }
                }
            },
        }

    })
</script>
<script>

    $(document).ready(function () {
        /*调起大图 S*/
        var mySwiper = new Swiper('.swiper-container2', {
            loop: false,
            pagination: '.swiper-pagination2',
            observer:false,//修改swiper自己或子元素时，自动初始化swiper
            observeParents:true,//修改swiper的父元素时，自动初始化swiper
            onSlideChangeEnd:function () {
                console.log(mySwiper.activeIndex);
            },
            preventLinksPropagation : false, //拖动时阻止click事件
            slidesPerView: 1, //容器同时显示slides的数量
            paginationClickable: true, //分页指示点可切换图片
            speed: 500,
        })
        $(".img_ol .z_addImg").on("click",
            function (e) {
                console.log(this)
                var imgBox = $(this).parent().find("img");
                console.log(imgBox.length)
                var i = $(this).index();
                console.log(i)
                $(".big_img .swiper-wrapper").html("")
                for (var j = 0, c = imgBox.length; j < c; j++) {
                    $(".big_img .swiper-wrapper").append('<div class="swiper-slide"><div class="cell"><img src="' + imgBox.eq(j).attr("src") + '" / ></div></div>');
                }
                mySwiper.update();
                $(".big_img").css({
                    "z-index": 1001,
                    "opacity": "1"
                });
                mySwiper.slideTo(i, 0, false);
                e.stopPropagation();
                return false;
            });

        $(".big_img").on("click",
            function (e) {
                $(this).css({
                    "z-index": "-1",
                    "opacity": "0"
                });
                $(".big_img .swiper-wrapper").html("");
                e.stopPropagation();
            });
    });

</script>

</html>